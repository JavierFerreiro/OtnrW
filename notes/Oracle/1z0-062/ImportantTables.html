<h1>Important Tables and useful  queries</h1>

<h2>Important Tables</h2>
<table class="table table-striped table-hover table-condensed">
<thead>
<tr><td>Name</td><td>Meaning</td></tr>
</thead>
<tbody>
<tr><td colspan="2" style="text-align:center;font-weight:bold;">User tables</td></tr>
<tr><td>user_objects</td><td>show the objects (tables, views, package, procedures, functions...) of the user</td></tr>
<tr><td>user_errors</td><td>show the errors of pl/sql compilation</td></tr>
<tr><td>user_source</td><td>show the source code of a plsql</td></tr>
<tr><td>trigger_source</td><td>show the source code of a trigger</td></tr>
<tr><td>user_tab_privs_made</td><td>list privileges granted to other users or roles</td></tr>
<tr><td>dba_tables</td>Show all the tables of the db<td>l</td></tr>
<tr><td>dba_segments</td>Show all the segments of the db<td>l</td></tr>
<tr><td>dba_extents</td>Show all the extents of the db<td>l</td></tr>
<tr><td>dba_temp_files</td>Show all the extents of the db<td>l</td></tr>
<tr><td>dba_data_files</td>Show all the extents of the db<td>l</td></tr>
<tr><td>dba_thresholds</td>Show the thresholds for launch the alerts<td>l</td></tr>
<tr><td>dba_resumable</td>Show the sessions suspended by (for example) space resumable action (no space)<td>l</td></tr>
<tr><td>dba_ts_quotas</td>Show the user quotas on the differents tablespaces<td>l</td></tr>
<tr><td>dba_role_privs</td><td>show the grantee granted_role grantor, etc. of the system privileges.</td></tr>
<tr><td>dba_rollback_segments</td><td>show the undo segments that joined with V$SESSION and V$TRANSACTION shows the undo segments for transactions.</td></tr>
<tr><td>SYS.AUD$</td><td>show the audit records of standard database auditing</td></tr>
<tr><td>dba_fga_audit_trail</td><td>show the audit records of fga</td></tr>
<tr><td>database_properties</td>Show properties of the database for example default tablespace, temporary tablespace...<td>l</td></tr>
<tr><td>dba_outstandings_alerts</td>Show alerts.<td>l</td></tr>
<tr><td>dba_sql_profiles</td>Show the profiles to improve som SQL statements..<td>l</td></tr>
<tr><td>dba_autotask_client</td><td>will show ehter the task are enable</td></tr>
<tr><td>DBA_ADVISOR_LOG</td><td>Task names,status and execution statistics for all task.</td></tr>
<tr><td>DBA_ADVISOR_TASK</td><td>More detailed information about advisor tasks, such as advisor name, user-specified description, and execution type for the current user</td></tr>
<tr><td>DBA_RSRC_CONSUMER_GROUPS</td><td>Description of the predefined cosumers groups</td></tr>
<tr><td>DBA_USERS</td><td>Show infromation about the users and the consumer group</td></tr>
<tr><td>DBA_RSRC_PLANS</td><td>plans and status</td></tr>
<tr><td>DBA_RSRC_PLAN_DIRECTIVES</td><td>plan directives</td></tr>
<tr><td>DBA_RSRC_CONSUMER_GROUPS</td><td>consumer groups</td></tr>
<tr><td>DBA_SCHEDULER_JOBS</td><td>table that is the storage point for all Scheduler jobs</td></tr>
<tr><td>DBA_SCHEDULER_JOB_LOG</td><td>View logging information about scheduling</td></tr>
<tr><td>DBA_SCHEDULER_JOB_RUN_DETAILS</td><td>A more detailed view about the execution of the scheduled jobs.</td></tr>
<tr><td>DBA_DIRECTORIES</td><td>Information about Oracle Directories</td></tr>
<tr><td>DBA_REGISTRY</td><td>Waht is installed and what release on the database</td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>


<tr><td colspan="2" style="text-align:center;font-weight:bold;">Dynamic Views</td></tr>
<tr><td>V$TIMEZONE_NAMES</td><td>list time zone abbreviattions that Oracle support</td></tr>
<tr><td>V$tablespace</td><td></td></tr>
<tr><td>V$datafile</td><td>List all the datafiles</td></tr>
<tr><td>V$controlfile</td><td>List all the controlflie</td></tr>
<tr><td>V$logfile</td><td>List all the logfile/td></tr>
<tr><td>V$log</td><td>Explain the status of the log: Active log file, if archived...</td></tr>
<tr><td>V$tempfile</td><td>Describe the temporal files of the database</td></tr>
<tr><td>V$PWFILE_USERS</td><td>show the users with SYSDBA or SYSOPER role</td></tr>
<tr><td>V$ROLLSTAT</td><td>Gives information on the size of the segments.</td></tr>
<tr><td>V$UNDOSTAT</td><td>Gives information of the undo.</td></tr>
<tr><td>V$SESSION</td><td>Gives information of the sessions in the instance (one row for logged-on session).</td></tr>
<tr><td>V$MEMORY_DYNAMIC_COMPONENTS</td><td>shows the current sizes of the structures</td></tr>
<tr><td>V$MEMORY_RESIZE_OPS</td><td>shows the history of the last 800 resizing operations.</td></tr>
<tr><td>V$PGA_TARGET_ADVICE</td><td>Advice of the memory to PGA</td></tr>
<tr><td>V$SGA_TARGET_ADVICE</td><td>Advice of the memory to SGA</td></tr>
<tr><td>V$MEMORY_TARGET_ADVICE</td><td>Advice of the total memory target</td></tr>
<tr><td>V$ADVISOR_PROGRESS</td><td>More detailed information about the completion status and time remaining for an advisor task.</td></tr>
<tr><td>V$RSRC_CONSUMER_GROUP</td><td>Gives Global Picture, showing how many sessions for each group are queued at any given moment.</td></tr>
<tr><td>V$SESSION</td><td>active consumer group of each session</td></tr>
<tr><td>V$RSRC_PLAN</td><td>currently active plan</td></tr>
<tr><td>V$RSRC_CONSUMER_GROUP</td><td>Statistics for the groups.</td></tr>
<tr><td>V$PROCESS</td><td>processes currently running including scheduled jobs.</td></tr>
<tr><td>V$TANSPORTABLE_PLATFORM</td><td>list of currently supported platforms and their endiannes to transport data (transportable tablespaces)</td></tr>
<tr><td>v$parameter2</td><td>View with the parameters of the instance</td></tr>
<tr><td>v$recovery_file_dest</td><td>View show configuration of fast revery area</td></tr>
<tr><td>v$recovery_area_usage</td><td>View show usage of fast revery area</td></tr>
<tr><td>V$ARCHIVE_DEST</td><td>Describe the destination or the log archive</td></tr>
<tr><td>V$option</td><td>To check if installed Oracle Database Vault, Oracle Label Security and others.</td></tr>
<tr><td></td><td></td></tr>
</tbody>
</table>




<h2>Useful Queries</h2>
<table class="table table-striped table-hover table-condensed">
<thead>
<tr><td>Query</td><td>Meaning</td></tr>
</thead>
<tbody>
<tr><td colspan="2" style="text-align:center;font-weight:bold;">Structure of DB</td></tr>
<tr><td>select instance_name,status from v$instance;</td><td></td></tr>
<tr><td>select name,open_mode from v$database;</td><td></td></tr>
<tr><td>select name from v$datafiles;</td><td></td></tr>
<tr><td>select * from v$controfile;</td><td></td></tr>
<tr><td>select member from v$logfile;</td><td></td></tr>
<tr><td colspan="2" style="text-align:center;font-weight:bold;">How tho know if Oracle DB server is single instance or distributed</td></tr>
<tr><td>select parallel from v$instance;</td><td>RAC?</td></tr>
<tr><td>select protection_level from v$database;</td><td></td>Data Guard?</tr>
<tr><td>select * from dba_streams_administrator;</td><td></td>Streams?</tr>
<tr><td>show sga</td><td></td></tr>
<tr><td>select component, current_size, min_size , max_size from v$sga_dynamic_components;</td><td></td></tr>
<tr><td>SELECT name,value FROM v$pgastat WHERE name in ('maximum PGA allocated','total PGA allocated')</td><td></td></tr>
<tr><td>SELECT name,description from v$bgprocess where paddr&lt;&gt;'00' order by name;<> </td><td></td></tr>
<tr><td>select instance_number,instance_name,host_name,version,status,parallel,archiver from v$instance;<br>
				select name,platform_name from v$database;<br>
				select * from v$tablespace;<br>
				select file#,name,status from v$datafile;<br>
				select status,name,block_size from v$controlfile;<br>
				select * from v$logfile;<br>
				select * from v$tempfile;<br>
</td><td>Document a system</td></tr>
<tr><td>select dbms_xdb.gethttpport from dual;</td><td>Obtain the port of express database.</td></tr>
<tr><td>select dbms_xdb.sethttpport(5500);</td><td>Set the port of express database.</td></tr>
<tr><td>select name,value from v$parameter order by name;</td><td>Check the current values of the parameters of the instance.</td></tr>
<tr><td>select name,value from v$spparameter order by name;</td><td>Check the values of the parameters in the spfile.</td></tr>
<tr><td>select name,value from v$parameter where isbasic='TRUE' order by name;</td><td>show the parameters and values</td></tr>
<tr><td>select member,bytes from v$logfile join v$log using (group#)</td><td>Obtain the port of express database.</td></tr>
<tr><td>select t.name,d.name,d.bytes from v$tablespace t join v$datafile d using (ts#)</td><td>Look at the tablespaces and his datafiles associated</td></tr>
</td><td>Alter a system</td></tr>
<tr><td>alter system set &lt;parameter&gt;=&lt;value&gt; [scope={memory|spfile|both}]</td><td>Change the value of the parameter for the instance,spfile or both</td></tr>
<tr><td>alter system reset &lt;parameter&gt;</td><td>Delete the parameter from spfile.</td></tr>
<tr><td>Create and manipulate tablespaces:<br>
				create tablespace prova
				datafile '/u02/oradata/cc/prova001.dbf' size 100m
				extent management local autoallocate
				segment space management auto;
				create table newtab(c1 date) tablespace prova;
				select extent_id, bytes from dba_extents where owner='SYS' and segment_name='NEWTAB';
				alter tablespace prova offline;
				alter table newtab allocate extent;
				alter tablespace prova read only;
				alter tablespace prova read write;
				drop tablespace prova including contents and datafiles;
				alter tablespace oldname rename to newname;
		</td>
		<td></td>
</tr>
<tr>
	<td>Select object_name, warning_operator,warning_value, critical_operator,critical_value 
		 from dba_thresholds 
		where metrics_name='Tablespace Space Usage'
	</td>
	<td>Show the thresholds for tablespace usage</td>
</tr>
<tr>
	<td>SELECT rtime, name, tablespace_usedsize
			FROM v$tablespace v join dba_hist_tbspc_space_usage d on (v.ts#=d.tablespace_id)
			ORDER BY name,rtime desc
	</td>
	<td></td>
</tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>

</tbody>
</table>


<h2>Useful parameters</h2>
<table class="table table-striped table-hover table-condensed">
<thead>
<tr><td>Parameter</td><td>Meaning</td></tr>
</thead>
<tbody>
<tr><td>undo_management</td><td>if Auto means that </td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td></td></tr>

</tbody>
</table>

<h2>Notes</h2>
<p>
	Name in Oracle with the DB and instance:<br>
	SID= name of the instance
	DB_NAME = Name of the Database
	DB_DOMAIN = A DOMAIN (in the sense of set not of DNS) of Databases
	GLOBAL_NAME = DB_NAME + DB_DOMAIN --> Only useful if GLOBAL_NAMES = true and is used when connect with dblink
	DB_UNIQUE_NAME = Identify a database in a unique form in a distributed database environment.
	----------------------------------------------------------------------------------------------------------------------------------
</p>
<p>
	Boot sequence: 
	<ol>
		<li>export ORACLE_HOME, ORACLE_SID (MUST)</li>
		<li>sqlplus / as sysdba</li>
		<li>startup</li>
		<li>sqlplus start the background process (pmon I think) and this search in ORACLE_HOME/dbs a init param file (sp or not)</li>
		<li>in the init param localize the DB_NAME and CONTROL_FILES Localization</li>
		<li>Startup all</li>
	</ol>
</p>
<p>The default in linux for CONTROL_FILES parameter is the same as the init param file $ORACLE_HOME/dbs
<h2>Storage structurtures comparation</h2>
<table>
	<tr>
		--To know the default tablespaces in the system:
		select *<br>
		from database_properties<br>
		where property_name like 'DEFAULT%TABLESPACE';<br>
	</tr>
	<tr>
		<td>show parameter control_files <br>or<br>select name,value from v$parameter</td>
		<td>select * V$controlfile</td>
	</tr>
	<tr>
		<td>show parameter undo_tablespace; --show the tablespaces used in this moment by the system<td>
		<td>select t.tablespace_name,df.file_name<br>
			from dba_tablespaces t, dba_data_files df<br>
			where t.contents='UNDO' and t.tablespace_name=df.tablespace_name;<br>
		<td>
		<td>select * frmo v$datafile;</td>
	</tr>
	<tr>
		<td>select t.tablespace_name,dtf.file_name
         from dba_tablespaces t, dba_temp_files dtf
         where t.contents='TEMPORARY' and t.tablespace_name=dtf.tablespace_name;
		</td>
		<td>select * from v$tempfile</td>
		<td>If want to know the default temporary tablespaces of a user: <br>
			begin<br>
				dbms_output.put_line(dbms_metadata.get_ddl('USER','SCOOT'));<br>
			end;<br>
		</td>
	</tr>
	<tr>
		<td>---</td>
		<td>select * from v$logfile;<br>select * frmo v$logfile;</td>
		<td></td>
	</tr>
</table>
